<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PLO — Project Lifecycle Orchestrator</title>
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@5.1.0/dist/reveal.css" />
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@5.1.0/dist/theme/black.css" />
  <style>
    :root { --accent: #00b4d8; --warn: #f59e0b; --crit: #ef4444; --ok: #22c55e; }
    .reveal { font-family: "Segoe UI", system-ui, -apple-system, sans-serif; }
    .reveal h1, .reveal h2, .reveal h3 { text-transform: none; }
    .reveal h1 { font-size: 2.2em; color: var(--accent); }
    .reveal h2 { font-size: 1.6em; color: var(--accent); }
    .reveal h3 { font-size: 1.2em; color: #94a3b8; }
    .reveal .accent { color: var(--accent); }
    .reveal .warn { color: var(--warn); }
    .reveal .crit { color: var(--crit); }
    .reveal .ok { color: var(--ok); }
    .reveal pre { font-size: 0.48em; box-shadow: none; background: #1e293b; border-radius: 8px; padding: 18px; }
    .reveal code { font-family: "JetBrains Mono", "Fira Code", monospace; }
    .reveal ul { text-align: left; font-size: 0.85em; }
    .reveal li { margin-bottom: 0.35em; }
    .reveal .slide-number { font-size: 14px; color: var(--accent); }
    .reveal .kpi-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
    .reveal .kpi-box { background: #1e293b; border-radius: 12px; padding: 24px; text-align: center; border-left: 4px solid var(--accent); }
    .reveal .kpi-box .number { font-size: 2.2em; font-weight: 700; color: var(--accent); }
    .reveal .kpi-box .label { font-size: 0.7em; color: #94a3b8; margin-top: 4px; }
    .reveal .pill { display: inline-block; padding: 4px 14px; border-radius: 20px; font-size: 0.65em; font-weight: 600; margin: 2px; }
    .reveal .pill-cyan { background: rgba(0,180,216,0.2); color: var(--accent); border: 1px solid var(--accent); }
    .reveal .pill-green { background: rgba(34,197,94,0.15); color: var(--ok); border: 1px solid var(--ok); }
    .reveal .pill-red { background: rgba(239,68,68,0.15); color: var(--crit); border: 1px solid var(--crit); }
    .reveal .pill-amber { background: rgba(245,158,11,0.15); color: var(--warn); border: 1px solid var(--warn); }
    .reveal .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; text-align: left; font-size: 0.8em; }
    .reveal .box { background: #1e293b; border-radius: 10px; padding: 18px; }
    .reveal .box h3 { margin-top: 0; font-size: 1em; }
    .reveal .timeline { display: flex; align-items: center; gap: 0; margin: 30px 0; font-size: 0.6em; }
    .reveal .timeline .step { text-align: center; flex: 1; position: relative; }
    .reveal .timeline .step .dot { width: 20px; height: 20px; border-radius: 50%; margin: 0 auto 6px; }
    .reveal .timeline .step .line { position: absolute; top: 10px; left: 50%; width: 100%; height: 2px; background: #475569; z-index: -1; }
    .reveal .timeline .step:last-child .line { display: none; }
    .reveal .source-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-top: 20px; font-size: 0.7em; }
    .reveal .source-card { background: #1e293b; border-radius: 8px; padding: 14px 10px; text-align: center; border-top: 3px solid var(--accent); }
    .reveal .source-card.optional { border-top-color: #475569; opacity: 0.8; }
    .reveal .source-card .src-name { font-weight: 700; font-size: 1.1em; margin-bottom: 4px; }
    .reveal .source-card .src-desc { color: #94a3b8; font-size: 0.85em; }
    .reveal table { font-size: 0.65em; margin: 0 auto; }
    .reveal table th { background: rgba(0,180,216,0.15); color: var(--accent); }
    .reveal table td, .reveal table th { padding: 6px 14px; border: 1px solid #334155; }
    .reveal .us-flow { display: flex; align-items: center; gap: 8px; font-size: 0.7em; flex-wrap: wrap; justify-content: center; margin-top: 20px; }
    .reveal .us-flow .us-step { background: #1e293b; border-radius: 8px; padding: 10px 16px; }
    .reveal .us-flow .arrow { color: var(--accent); font-size: 1.3em; }
    .reveal .footer-note { position: absolute; bottom: 20px; left: 0; right: 0; text-align: center; font-size: 0.45em; color: #64748b; }
    .reveal .excom-tag { display: inline-block; background: rgba(0,180,216,0.15); color: var(--accent); border: 1px solid var(--accent); border-radius: 4px; padding: 3px 12px; font-size: 0.45em; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; }
    .reveal .burn-row { display: flex; align-items: stretch; gap: 16px; margin-top: 20px; }
    .reveal .burn-card { flex: 1; background: #1e293b; border-radius: 10px; padding: 20px 16px; text-align: center; border-top: 4px solid var(--crit); }
    .reveal .burn-card .burn-stat { font-size: 1.8em; font-weight: 800; color: var(--crit); }
    .reveal .burn-card .burn-label { font-size: 0.7em; color: #94a3b8; margin-top: 4px; }
    .reveal .strat-axis { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 18px; margin-top: 24px; }
    .reveal .strat-card { background: #1e293b; border-radius: 10px; padding: 20px; text-align: left; position: relative; overflow: hidden; }
    .reveal .strat-card::before { content: ""; position: absolute; top: 0; left: 0; width: 4px; height: 100%; }
    .reveal .strat-card.s1::before { background: var(--crit); }
    .reveal .strat-card.s2::before { background: var(--warn); }
    .reveal .strat-card.s3::before { background: var(--ok); }
    .reveal .strat-card h3 { margin: 0 0 8px; font-size: 0.9em; }
    .reveal .strat-card p { font-size: 0.7em; color: #cbd5e1; margin: 0; }
    .reveal .roi-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 24px; }
    .reveal .roi-card { background: #1e293b; border-radius: 10px; padding: 20px; text-align: center; }
    .reveal .roi-card .roi-before { font-size: 1.4em; font-weight: 700; color: var(--crit); text-decoration: line-through; opacity: 0.6; }
    .reveal .roi-card .roi-arrow { font-size: 1.2em; color: #475569; margin: 4px 0; }
    .reveal .roi-card .roi-after { font-size: 1.6em; font-weight: 800; color: var(--ok); }
    .reveal .roi-card .roi-label { font-size: 0.65em; color: #94a3b8; margin-top: 6px; }
    .reveal .separator-line { width: 120px; height: 2px; background: var(--accent); margin: 30px auto; opacity: 0.4; }
  </style>
</head>
<body>
<div class="reveal">
<div class="slides">

<!-- ============================================================ -->
<!-- EXCOM SLIDE 1/6 — Title -->
<!-- ============================================================ -->
<section>
  <div class="excom-tag">Executive Summary &mdash; 6 slides</div>
  <h1>PLO</h1>
  <h3>Project Lifecycle Orchestrator</h3>
  <div class="separator-line"></div>
  <p style="font-size: 0.85em; color: #cbd5e1; max-width: 700px; margin: 0 auto; line-height: 1.6;">
    Regain control over the full lifecycle<br/>
    of home improvement projects
  </p>
  <p style="font-size: 0.65em; color: #64748b; margin-top: 30px;">
    Kitchen &bull; Bathroom &bull; Energy Renovation
  </p>
</section>

<!-- ============================================================ -->
<!-- EXCOM SLIDE 2/6 — Burning Platform -->
<!-- ============================================================ -->
<section>
  <div class="excom-tag">Burning Platform</div>
  <h2>Customer experience is degrading</h2>
  <div class="burn-row">
    <div class="burn-card">
      <div class="burn-stat">5+</div>
      <div class="burn-label">Siloed systems<br/><small>ERP, OMS, TMS, WFM, CRM&hellip;<br/>No unified view</small></div>
    </div>
    <div class="burn-card">
      <div class="burn-stat">D+3</div>
      <div class="burn-label">Avg. anomaly detection time<br/><small>for a logistics issue<br/>by an operator</small></div>
    </div>
    <div class="burn-card">
      <div class="burn-stat">0%</div>
      <div class="burn-label">Customer visibility<br/><small>on project progress<br/>between order and installation</small></div>
    </div>
    <div class="burn-card" style="border-top-color: var(--warn);">
      <div class="burn-stat" style="color: var(--warn);">x3</div>
      <div class="burn-label">Support calls<br/><small>asking &ldquo;where is<br/>my project?&rdquo;</small></div>
    </div>
  </div>
  <div class="fragment" style="margin-top: 24px;">
    <div class="box" style="border-left: 4px solid var(--crit); font-size: 0.75em; text-align: left; max-width: 800px; margin: 0 auto;">
      <strong class="crit">Cost of inaction:</strong> each undetected anomaly generates on average <strong>2 to 5 extra days of delay</strong>, a rescheduled installation, and an avoidable support contact. On an average basket of &euro;15,000, the NPS impact and rescheduling cost are direct.
    </div>
  </div>
</section>

<!-- ============================================================ -->
<!-- EXCOM SLIDE 3/6 — Strategic stakes -->
<!-- ============================================================ -->
<section>
  <div class="excom-tag">Strategic Stakes</div>
  <h2>Three value creation pillars</h2>
  <div class="strat-axis">
    <div class="strat-card s1">
      <h3 class="crit">Operational Excellence</h3>
      <p>Shift from <strong>reactive</strong> management (discovering problems when the customer calls) to <strong>proactive</strong> management (detecting and acting before the customer knows).</p>
      <p style="margin-top: 10px; color: var(--accent); font-size: 0.85em;"><strong>Lever:</strong> 22 real-time anomaly rules + automatic escalation</p>
    </div>
    <div class="strat-card s2">
      <h3 class="warn">Customer Satisfaction &amp; Retention</h3>
      <p>Provide <strong>full transparency</strong> to customers on their project progress. Reduce support calls. Transform an opaque journey into a trust experience.</p>
      <p style="margin-top: 10px; color: var(--accent); font-size: 0.85em;"><strong>Lever:</strong> Public customer tracking portal, proactive notifications</p>
    </div>
    <div class="strat-card s3">
      <h3 class="ok">Model Scalability</h3>
      <p>A <strong>multi-source, multi-vertical</strong> orchestration hub (kitchen, bathroom, energy renovation) that deploys without changing existing systems &mdash; webhook-based integration.</p>
      <p style="margin-top: 10px; color: var(--accent); font-size: 0.85em;"><strong>Lever:</strong> 7 adapters, decoupled event-driven architecture</p>
    </div>
  </div>
</section>

<!-- ============================================================ -->
<!-- EXCOM SLIDE 4/6 — The PLO answer -->
<!-- ============================================================ -->
<section>
  <div class="excom-tag">The Answer</div>
  <h2>PLO: a project control tower</h2>
  <p style="font-size: 0.75em; color: #94a3b8;">Aggregate, detect, act &mdash; in real time</p>
  <div style="margin-top: 20px;">
    <div style="display: flex; gap: 0; align-items: stretch; max-width: 900px; margin: 0 auto;">
      <div style="flex: 1; background: #1e293b; border-radius: 10px 0 0 10px; padding: 20px; text-align: center; border-bottom: 4px solid var(--accent);">
        <div style="font-size: 1.4em; margin-bottom: 6px;">1. Aggregate</div>
        <div style="font-size: 0.7em; color: #94a3b8;">All supply chain events flow into a single point, in real time</div>
      </div>
      <div style="flex: 1; background: #1e293b; padding: 20px; text-align: center; border-bottom: 4px solid var(--warn);">
        <div style="font-size: 1.4em; margin-bottom: 6px;">2. Detect</div>
        <div style="font-size: 0.7em; color: #94a3b8;">22 business rules automatically identify delays, shortages, and blockers</div>
      </div>
      <div style="flex: 1; background: #1e293b; border-radius: 0 10px 10px 0; padding: 20px; text-align: center; border-bottom: 4px solid var(--ok);">
        <div style="font-size: 1.4em; margin-bottom: 6px;">3. Act</div>
        <div style="font-size: 0.7em; color: #94a3b8;">Instant alert, automatic escalation, traceable acknowledgment, AI risk analysis</div>
      </div>
    </div>
  </div>
  <div class="fragment two-col" style="margin-top: 24px; max-width: 900px; margin-left: auto; margin-right: auto;">
    <div class="box" style="border-left: 4px solid var(--accent);">
      <h3 class="accent" style="font-size: 0.85em;">For the Operator</h3>
      <ul style="font-size: 0.75em;">
        <li>Real-time dashboard with severity levels</li>
        <li>Individual or bulk acknowledgment</li>
        <li>CSV export, activity journal</li>
        <li>AI risk score per project</li>
      </ul>
    </div>
    <div class="box" style="border-left: 4px solid var(--ok);">
      <h3 class="ok" style="font-size: 0.85em;">For the Customer</h3>
      <ul style="font-size: 0.75em;">
        <li>Tracking portal with unique URL</li>
        <li>Clear milestones: order &rarr; installation</li>
        <li>Zero authentication required</li>
        <li>Internal data hidden</li>
      </ul>
    </div>
  </div>
</section>

<!-- ============================================================ -->
<!-- EXCOM SLIDE 5/6 — Resources & Vibe Coding -->
<!-- ============================================================ -->
<section>
  <div class="excom-tag">Resources Consumed</div>
  <h2>3 days, 1 developer + Claude Code</h2>
  <div class="kpi-grid" style="grid-template-columns: 1fr 1fr 1fr; margin-top: 24px;">
    <div class="kpi-box">
      <div class="number" style="font-size: 1.8em;">~20,000</div>
      <div class="label">Lines of code<br/><small>9,400 production + 9,800 tests + schema</small></div>
    </div>
    <div class="kpi-box">
      <div class="number" style="font-size: 1.8em;">98</div>
      <div class="label">TypeScript files<br/><small>+ Prisma schema, migrations, config</small></div>
    </div>
    <div class="kpi-box">
      <div class="number" style="font-size: 1.8em;">22</div>
      <div class="label">Sprints delivered<br/><small>29 commits in 3 days</small></div>
    </div>
  </div>
  <div class="fragment two-col" style="margin-top: 24px; max-width: 900px; margin-left: auto; margin-right: auto;">
    <div class="box" style="border-left: 4px solid var(--crit); text-align: center;">
      <h3 class="crit" style="font-size: 0.9em;">Traditional Estimate</h3>
      <div style="font-size: 2.2em; font-weight: 800; color: var(--crit); margin: 10px 0;">60&ndash;90 man-days</div>
      <div style="font-size: 0.7em; color: #94a3b8;">
        Backend + API: 25&ndash;35 md<br/>
        Anomaly engine: 10&ndash;15 md<br/>
        Tests (97% cov.): 15&ndash;20 md<br/>
        Integrations (7 sources): 10&ndash;15 md<br/>
        Infra, CI, seed, docs: 5&ndash;10 md
      </div>
    </div>
    <div class="box" style="border-left: 4px solid var(--ok); text-align: center;">
      <h3 class="ok" style="font-size: 0.9em;">With Claude Code (vibe coding)</h3>
      <div style="font-size: 2.2em; font-weight: 800; color: var(--ok); margin: 10px 0;">~3 man-days</div>
      <div style="font-size: 0.7em; color: #94a3b8;">
        1 senior developer piloting Claude<br/>
        Feb 24&ndash;27, 2026 (3 calendar days)<br/>
        485 tests, 97% line coverage<br/>
        12 full-stack E2E tests<br/>
        Production-ready, documented
      </div>
    </div>
  </div>
  <div class="fragment" style="margin-top: 18px;">
    <div class="box" style="border-left: 4px solid var(--accent); font-size: 0.7em; max-width: 750px; margin: 0 auto; text-align: left;">
      <strong class="accent">Acceleration factor: x20 to x30</strong> &mdash; The developer focuses on architecture, business validation and steering. Claude Code generates, tests, and iterates on the code continuously.
    </div>
  </div>
</section>

<!-- ============================================================ -->
<!-- EXCOM SLIDE 6/6 — Impact & Next Steps -->
<!-- ============================================================ -->
<section>
  <div class="excom-tag">Impact &amp; Next Steps</div>
  <h2>Expected Outcomes</h2>
  <div class="roi-grid">
    <div class="roi-card">
      <div class="roi-before">D+3</div>
      <div class="roi-arrow">&darr;</div>
      <div class="roi-after">&lt; 1h</div>
      <div class="roi-label">Anomaly detection time<br/><small>From manual discovery to automatic alert</small></div>
    </div>
    <div class="roi-card">
      <div class="roi-before">0%</div>
      <div class="roi-arrow">&darr;</div>
      <div class="roi-after">100%</div>
      <div class="roi-label">Customer visibility on their project<br/><small>Public portal with real-time milestones</small></div>
    </div>
    <div class="roi-card">
      <div class="roi-before" style="text-decoration: none; opacity: 1;">x3 calls</div>
      <div class="roi-arrow">&darr;</div>
      <div class="roi-after" style="font-size: 1.2em;">-60% support calls</div>
      <div class="roi-label">Support load reduction<br/><small>Customers use the portal instead of calling</small></div>
    </div>
    <div class="roi-card">
      <div class="roi-before">Manual</div>
      <div class="roi-arrow">&darr;</div>
      <div class="roi-after" style="font-size: 1.2em;">Auto + AI</div>
      <div class="roi-label">Escalation &amp; risk analysis<br/><small>4h escalation + predictive Claude risk score</small></div>
    </div>
  </div>
  <div class="fragment" style="margin-top: 28px;">
    <div class="box" style="border-left: 4px solid var(--accent); max-width: 800px; margin: 0 auto; text-align: left; font-size: 0.75em;">
      <h3 class="accent" style="font-size: 1em; margin-bottom: 8px;">Next Steps</h3>
      <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px;">
        <div><span class="pill pill-cyan">Short term</span><br/>Pilot on 1 store &mdash; 50 projects<br/>Measure MTTA &amp; NPS baseline</div>
        <div><span class="pill pill-amber">Medium term</span><br/>Multi-site rollout<br/>Production CRM integration</div>
        <div><span class="pill pill-green">Long term</span><br/>Generalized AI predictive analysis<br/>Enhanced customer self-service</div>
      </div>
    </div>
  </div>
</section>

<!-- ============================================================ -->
<!-- SEPARATOR — End EXCOM / Start detailed slides -->
<!-- ============================================================ -->
<section data-background-color="#0f172a">
  <div class="separator-line" style="width: 80px;"></div>
  <h2 style="font-size: 1.2em; color: #475569;">Detailed Slides</h2>
  <p style="font-size: 0.7em; color: #334155;">Architecture, integrations, user stories</p>
  <div class="separator-line" style="width: 80px;"></div>
</section>

<!-- ============================================================ -->
<!-- SLIDE — Title (detail) -->
<!-- ============================================================ -->
<section>
  <h1>PLO</h1>
  <h3>Project Lifecycle Orchestrator</h3>
  <p style="margin-top: 30px; font-size: 0.75em; color: #94a3b8;">
    Real-time orchestration and monitoring<br/>
    of home improvement projects
  </p>
  <div style="margin-top: 40px;">
    <span class="pill pill-cyan">Fastify</span>
    <span class="pill pill-cyan">TypeScript</span>
    <span class="pill pill-cyan">PostgreSQL</span>
    <span class="pill pill-cyan">Redis</span>
    <span class="pill pill-cyan">BullMQ</span>
  </div>
</section>

<!-- ============================================================ -->
<!-- SLIDE — The problem -->
<!-- ============================================================ -->
<section>
  <h2>The Problem</h2>
  <div class="two-col" style="margin-top: 30px;">
    <div>
      <p>A home improvement project (kitchen, bathroom, energy renovation) involves <strong class="accent">5+ systems</strong>:</p>
      <ul>
        <li>ERP &mdash; orders, inventory</li>
        <li>OMS &mdash; fulfillment, shipments</li>
        <li>TMS &mdash; last-mile transport</li>
        <li>WFM &mdash; technician scheduling</li>
        <li>CRM &mdash; customer relations</li>
      </ul>
    </div>
    <div>
      <div class="box" style="border-left: 4px solid var(--crit);">
        <h3 class="crit">Consequences</h3>
        <ul style="font-size: 0.9em;">
          <li class="fragment">Fragmented visibility across teams</li>
          <li class="fragment">Anomalies detected <strong>too late</strong></li>
          <li class="fragment">No automatic escalation</li>
          <li class="fragment">Customer blind on progress</li>
          <li class="fragment">Declining customer satisfaction</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<!-- ============================================================ -->
<!-- SLIDE — The solution -->
<!-- ============================================================ -->
<section>
  <h2>The PLO Solution</h2>
  <p style="font-size: 0.8em; color: #94a3b8;">Centralized project lifecycle orchestration hub</p>
  <div class="kpi-grid" style="grid-template-columns: 1fr 1fr 1fr 1fr;">
    <div class="kpi-box fragment">
      <div class="number">7</div>
      <div class="label">Integrated event sources</div>
    </div>
    <div class="kpi-box fragment">
      <div class="number">22</div>
      <div class="label">Configurable anomaly rules</div>
    </div>
    <div class="kpi-box fragment">
      <div class="number" style="font-size: 1.6em;">Real-time</div>
      <div class="label">Detection &amp; SSE alerts</div>
    </div>
    <div class="kpi-box fragment">
      <div class="number" style="font-size: 1.6em;">Portal</div>
      <div class="label">Public customer tracking</div>
    </div>
  </div>
  <div class="fragment" style="margin-top: 30px;">
    <pre style="text-align: center; font-size: 0.55em; background: transparent; padding: 0;">
ERP / OMS / TMS / WFM / CRM / E-commerce / Manual
              |
        [ Webhook Ingest ]
              |
    [ PLO &mdash; Detection + Alerts ]
         /        \
  [ Operator ]  [ Customer ]</pre>
  </div>
</section>

<!-- ============================================================ -->
<!-- SLIDE — Key benefits -->
<!-- ============================================================ -->
<section>
  <h2>Key Benefits</h2>
  <div class="kpi-grid" style="margin-top: 30px;">
    <div class="box fragment">
      <h3 class="accent">Proactive Detection</h3>
      <p style="font-size: 0.75em; color: #cbd5e1;">Anomalies detected upon event ingestion &mdash; no waiting for the daily report</p>
    </div>
    <div class="box fragment">
      <h3 class="warn">Automatic Escalation</h3>
      <p style="font-size: 0.75em; color: #cbd5e1;">If unacknowledged within 4h: manager escalation + automatic CRM ticket</p>
    </div>
    <div class="box fragment">
      <h3 class="ok">Full Traceability</h3>
      <p style="font-size: 0.75em; color: #cbd5e1;">Operator activity journal, timestamped actions, complete audit trail</p>
    </div>
    <div class="box fragment">
      <h3 style="color: #a78bfa;">Customer Portal</h3>
      <p style="font-size: 0.75em; color: #cbd5e1;">Real-time tracking without calling support &mdash; milestones visible, internal data hidden</p>
    </div>
  </div>
</section>

<!-- ============================================================ -->
<!-- SLIDE — Architecture overview -->
<!-- ============================================================ -->
<section>
  <h2>Architecture Overview</h2>
  <pre style="font-size: 0.5em; line-height: 1.5;">
 +----------+  +----------+  +----------+  +----------+
 |   ERP    |  |   OMS    |  |   TMS    |  |  WFM /   |
 | (stock,  |  | (ship,   |  | (last    |  |  CRM /   |
 | picking) |  | fulfill) |  |   mile)  |  | E-comm)  |
 +----+-----+  +----+-----+  +----+-----+  +----+-----+
      |             |             |             |
      +------+------+------+------+------+------+
             |                    |
      POST /api/events/ingest (Bearer token)
             |
   +---------v---------+     +----------------+
   |   Adapter Layer    |     |   PostgreSQL   |
   | Validation + Norm. +-----> (Prisma ORM)   |
   +---------+---------+     +-------+--------+
             |                       |
   +---------v---------+     +-------v--------+
   |  BullMQ (Redis)   |     |  Anomaly Rules |
   |  Event Queue      +-----> 22 rules       |
   +---------+---------+     | RT + Scheduled  |
             |               +-------+--------+
   +---------v---------+             |
   |     Worker        |    +--------v--------+
   | Steps + Entities  |    |  Notifications  |
   +-------------------+    | Email/SSE/CRM   |
                            +-----------------+</pre>
</section>

<!-- ============================================================ -->
<!-- SLIDE — Tech stack -->
<!-- ============================================================ -->
<section>
  <h2>Tech Stack</h2>
  <div class="two-col" style="margin-top: 20px;">
    <div>
      <div class="box">
        <h3 class="accent">Backend</h3>
        <ul style="font-size: 0.85em;">
          <li><strong>Fastify 5</strong> &mdash; high-performance HTTP framework</li>
          <li><strong>TypeScript</strong> strict &mdash; type safety</li>
          <li><strong>Zod</strong> &mdash; runtime payload validation</li>
          <li><strong>Prisma 5</strong> &mdash; type-safe ORM</li>
        </ul>
      </div>
      <div class="box" style="margin-top: 16px;">
        <h3 class="accent">Security</h3>
        <ul style="font-size: 0.85em;">
          <li>JWT httpOnly cookie (operators)</li>
          <li>Bearer token per source (webhooks)</li>
          <li>bcrypt password hashing</li>
          <li>Roles: admin, coordinator, viewer</li>
        </ul>
      </div>
    </div>
    <div>
      <div class="box">
        <h3 class="accent">Infrastructure</h3>
        <ul style="font-size: 0.85em;">
          <li><strong>PostgreSQL 15</strong> &mdash; persistence</li>
          <li><strong>Redis 7</strong> &mdash; queue + cache</li>
          <li><strong>BullMQ</strong> &mdash; async processing</li>
          <li><strong>Docker Compose</strong> &mdash; local infra</li>
        </ul>
      </div>
      <div class="box" style="margin-top: 16px;">
        <h3 class="accent">Quality</h3>
        <ul style="font-size: 0.85em;">
          <li><strong>Vitest</strong> &mdash; 485 unit tests</li>
          <li><strong>97%</strong> line coverage</li>
          <li>12 full-stack E2E tests</li>
          <li>node-cron for scheduled evaluations</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<!-- ============================================================ -->
<!-- SLIDE — Event pipeline -->
<!-- ============================================================ -->
<section>
  <h2>Event Pipeline</h2>
  <p style="font-size: 0.7em; color: #94a3b8;">Each event passes through 7 stages before notification</p>
  <div style="margin-top: 20px;">
    <table>
      <tr>
        <th>#</th><th>Stage</th><th>Detail</th>
      </tr>
      <tr><td>1</td><td class="accent">Validation</td><td>Source-specific Zod schema per adapter</td></tr>
      <tr><td>2</td><td class="accent">Normalization</td><td>Source payload &rarr; common <code>NormalizedEvent</code></td></tr>
      <tr><td>3</td><td class="accent">Project resolution</td><td>Cross-system lookup via <code>ProjectExternalRef</code></td></tr>
      <tr><td>4</td><td class="accent">Deduplication</td><td>Unique constraint <code>(source, source_ref)</code></td></tr>
      <tr><td>5</td><td class="accent">Persistence</td><td>Event stored in DB + derived severity</td></tr>
      <tr><td>6</td><td class="accent">Enqueue</td><td>BullMQ job for async processing</td></tr>
      <tr><td>7</td><td class="accent">Worker</td><td>Upsert Step + Update entities + Evaluate rules</td></tr>
    </table>
  </div>
  <div class="fragment" style="margin-top: 16px;">
    <div class="box" style="display: inline-block; font-size: 0.65em; border-left: 4px solid var(--warn);">
      <strong class="warn">Dead Letter Queue</strong> &mdash; events with unresolved projects &rarr; DLQ for manual intervention
    </div>
  </div>
</section>

<!-- ============================================================ -->
<!-- SLIDE — Anomaly engine -->
<!-- ============================================================ -->
<section>
  <h2>Anomaly Engine</h2>
  <p style="font-size: 0.75em; color: #94a3b8;">22 configurable rules &mdash; real-time + scheduled</p>
  <div class="two-col" style="margin-top: 20px;">
    <div class="box" style="border-left: 4px solid var(--crit);">
      <h3 class="crit">Real-time</h3>
      <p style="font-size: 0.75em; color: #cbd5e1;">Evaluated on each event ingestion</p>
      <ul style="font-size: 0.8em;">
        <li><strong>ANO-01</strong> Shortage &lt; 72h before delivery</li>
        <li><strong>ANO-02</strong> Shipment delay vs. ETA</li>
        <li><strong>ANO-04</strong> Partial delivery</li>
        <li><strong>ANO-06</strong> Technician unavailable</li>
      </ul>
    </div>
    <div class="box" style="border-left: 4px solid var(--warn);">
      <h3 class="warn">Scheduled (Cron)</h3>
      <p style="font-size: 0.75em; color: #cbd5e1;">Evaluated hourly or every morning</p>
      <ul style="font-size: 0.8em;">
        <li><strong>ANO-07</strong> D-N: delivery delay forecast</li>
        <li><strong>ANO-14</strong> Incomplete consolidation</li>
        <li><strong>ANO-17</strong> Consolidation past due</li>
        <li><strong>ANO-22</strong> Installation scheduled w/o delivery</li>
      </ul>
    </div>
  </div>
  <div class="fragment" style="margin-top: 20px;">
    <div class="box" style="border-left: 4px solid var(--accent); font-size: 0.7em;">
      <strong class="accent">Automatic escalation</strong> &mdash; every 30 min, check for unacknowledged anomalies. After 4h: escalated notification + CRM ticket.
    </div>
  </div>
</section>

<!-- ============================================================ -->
<!-- SLIDE — Data model -->
<!-- ============================================================ -->
<section>
  <h2>Data Model</h2>
  <pre style="font-size: 0.48em; line-height: 1.6;">
                        +------------------+
                        |     Project      |
                        | type, status,    |
                        | customer_id,     |
                        | tracking_token   |
                        +--------+---------+
                  _______________|________________
                 |        |          |            |
          +------v--+ +---v-----+ +-v----------+ +v-----------+
          | Order(s) | |  Event  | |    Step    | |ProjectNote |
          | erp_ref, | | source, | | step_type, | | author,    |
          | status   | | type,   | | status,    | | content    |
          +----+-----+ | payload | | XOR parent | +------------+
               |        +---------+ +-----------+
        +------v------+
        | OrderLine(s) |
        | sku, qty,    |
        | stock_status |
        +--------------+
               |
        +------v------+     +---------------+     +----------------+
        | Shipment(s)  |     | Consolidation |     | LastMileDeliv. |
        | carrier, leg,+-----> station,      +----->  carrier,      |
        | status, ETA  |     | orders_arrived|     |  is_partial,   |
        +--------------+     +---------------+     |  pod_url       |
                                                   +-------+--------+
                                                           |
                                                   +-------v--------+
                                                   | Installation   |
                                                   | technician,    |
                                                   | report, status |
                                                   +----------------+

  Cross-cutting: AnomalyRule (22) &rarr; Notification &rarr; ActivityLog</pre>
</section>

<!-- ============================================================ -->
<!-- SLIDE — 7 event sources -->
<!-- ============================================================ -->
<section>
  <h2>7 Event Sources</h2>
  <p style="font-size: 0.7em; color: #94a3b8;">Each source has a typed adapter with Zod validation</p>
  <div class="source-grid">
    <div class="source-card">
      <div class="src-name">ERP</div>
      <div class="src-desc">Orders, stock, picking, confirmation</div>
    </div>
    <div class="source-card">
      <div class="src-name">OMS</div>
      <div class="src-desc">Shipments, fulfillment tracking, consolidation</div>
    </div>
    <div class="source-card">
      <div class="src-name">TMS</div>
      <div class="src-desc">Last-mile transport, POD, delivery</div>
    </div>
    <div class="source-card">
      <div class="src-name">Manual</div>
      <div class="src-desc">Operator input for non-integrated steps</div>
    </div>
    <div class="source-card optional">
      <div class="src-name">WFM</div>
      <div class="src-desc">Technician scheduling, installation</div>
    </div>
    <div class="source-card optional">
      <div class="src-name">CRM</div>
      <div class="src-desc">Customer data, cross-references</div>
    </div>
    <div class="source-card optional">
      <div class="src-name">E-commerce</div>
      <div class="src-desc">Online orders, cart, payment</div>
    </div>
    <div class="source-card optional" style="border-top-color: transparent; background: transparent;">
      <div class="src-desc" style="color: #64748b; padding-top: 12px;">
        <span class="pill pill-cyan">Required</span>
        <span class="pill" style="border: 1px solid #475569; color: #94a3b8;">Optional</span>
      </div>
    </div>
  </div>
  <p class="fragment" style="font-size: 0.65em; color: #94a3b8; margin-top: 16px;">
    Authentication: <strong>Bearer token</strong> per source &mdash; dedicated API key configured in environment
  </p>
</section>

<!-- ============================================================ -->
<!-- SLIDE — Multi-channel notifications -->
<!-- ============================================================ -->
<section>
  <h2>Multi-Channel Notifications</h2>
  <div class="two-col" style="margin-top: 20px;">
    <div>
      <div class="box" style="margin-bottom: 14px;">
        <h3 class="accent">Email (SMTP)</h3>
        <p style="font-size: 0.75em; color: #cbd5e1;">HTML templates per rule (ANO-01, ANO-02, ANO-06...). Recipients by role: coordinator, buyer, warehouse, manager.</p>
      </div>
      <div class="box" style="margin-bottom: 14px;">
        <h3 class="accent">Real-time SSE</h3>
        <p style="font-size: 0.75em; color: #cbd5e1;">Server-Sent Events to operator dashboard. Instant broadcast on each detected anomaly. 20s keep-alive.</p>
      </div>
    </div>
    <div>
      <div class="box" style="margin-bottom: 14px;">
        <h3 class="accent">CRM Ticket</h3>
        <p style="font-size: 0.75em; color: #cbd5e1;">Automatic ticket creation upon escalation. CRM reference tracked on the notification.</p>
      </div>
      <div class="box" style="margin-bottom: 14px;">
        <h3 class="accent">Customer Portal</h3>
        <p style="font-size: 0.75em; color: #cbd5e1;">Public URL with unique token per project. Milestones visible, internal data hidden. Zero authentication required.</p>
      </div>
    </div>
  </div>
</section>

<!-- ============================================================ -->
<!-- SLIDE — AI risk analysis -->
<!-- ============================================================ -->
<section>
  <h2>AI Risk Analysis</h2>
  <p style="font-size: 0.75em; color: #94a3b8;">Predictive risk assessment per project via Claude API</p>
  <div style="margin-top: 20px;">
    <div class="box" style="border-left: 4px solid #a78bfa; text-align: left;">
      <h3 style="color: #a78bfa; margin-bottom: 10px;">GET /api/projects/:id/risk-analysis</h3>
      <ul style="font-size: 0.8em;">
        <li class="fragment">Full project context sent to <strong>Claude</strong> (orders, shipments, anomalies, consolidation, installation)</li>
        <li class="fragment">Risk score + operational recommendations</li>
        <li class="fragment">Analyzed factors: delivery delays, missing stock, installation calendar pressure</li>
        <li class="fragment"><strong class="warn">Heuristic fallback</strong> if API unavailable &mdash; rule-based analysis</li>
      </ul>
    </div>
  </div>
  <div class="fragment" style="margin-top: 20px;">
    <pre style="font-size: 0.55em; text-align: left;">
// Example response
{
  "risk_score": 78,
  "level": "high",
  "factors": [
    "2 lines in shortage at D-3 before promised delivery",
    "Incomplete consolidation (1/3 orders arrived)",
    "Installation scheduled without full delivery"
  ],
  "recommendations": [
    "Contact supplier for priority shipment",
    "Postpone installation by 5 days"
  ]
}</pre>
  </div>
</section>

<!-- ============================================================ -->
<!-- SLIDE — Installer Portal (Sprint 22) -->
<!-- ============================================================ -->
<section>
  <h2>Installer Portal</h2>
  <h3>Delivery readiness check for technicians</h3>
  <p style="font-size: 0.7em; color: #94a3b8; margin-bottom: 10px;">Public endpoint &mdash; <code>GET /api/public/installer/:token</code></p>
  <div class="two-col" style="margin-top: 16px;">
    <div>
      <div class="box" style="border-left: 4px solid var(--accent);">
        <h3 class="accent" style="font-size: 0.9em;">What the installer sees</h3>
        <ul style="font-size: 0.8em;">
          <li>Installation date, time slot &amp; address</li>
          <li><strong>Delivery readiness</strong> indicator (ready / not ready)</li>
          <li>Status of each prerequisite order</li>
          <li>Shipment tracking per order</li>
          <li>Consolidation &amp; last-mile status</li>
          <li>5 lifecycle milestones</li>
        </ul>
      </div>
    </div>
    <div>
      <div class="box" style="border-left: 4px solid var(--ok); margin-bottom: 14px;">
        <h3 class="ok" style="font-size: 0.9em;">All delivered</h3>
        <pre style="font-size: 0.75em; padding: 10px; margin: 8px 0 0;">{ "ready": true,
  "summary": "2/2 orders delivered" }</pre>
      </div>
      <div class="box" style="border-left: 4px solid var(--crit);">
        <h3 class="crit" style="font-size: 0.9em;">Partial delivery</h3>
        <pre style="font-size: 0.75em; padding: 10px; margin: 8px 0 0;">{ "ready": false,
  "summary": "1/2 orders delivered" }</pre>
      </div>
    </div>
  </div>
  <div class="fragment" style="margin-top: 16px;">
    <div class="box" style="border-left: 4px solid var(--accent); font-size: 0.7em; max-width: 800px; margin: 0 auto;">
      <strong class="accent">Token-based access</strong> &mdash; unique URL per installation, no login required. Sent to the technician by the WFM system or the operator. Internal IDs and anomaly details remain hidden.
    </div>
  </div>
</section>

<!-- ============================================================ -->
<!-- SLIDE — US1: Operator detects a delay -->
<!-- ============================================================ -->
<section>
  <h2>User Story 1</h2>
  <h3>Operator detects a critical delay</h3>
  <p style="font-size: 0.7em; color: #94a3b8; margin-bottom: 10px;">Scenario: Leclerc family &mdash; &euro;22,000 kitchen, status <span class="pill pill-red">on_hold</span></p>
  <div class="us-flow">
    <div class="us-step" style="border-left: 3px solid var(--crit);">SKU backordered<br/><small class="crit">ANO-01</small></div>
    <div class="arrow">&rarr;</div>
    <div class="us-step" style="border-left: 3px solid var(--crit);">Transport exception<br/><small class="crit">ANO-18</small></div>
    <div class="arrow">&rarr;</div>
    <div class="us-step" style="border-left: 3px solid var(--crit);">Consolidation delay<br/><small class="crit">ANO-17</small></div>
    <div class="arrow">&rarr;</div>
    <div class="us-step" style="border-left: 3px solid var(--accent);">3 email alerts<br/><small>coordinator</small></div>
  </div>
  <div class="fragment us-flow" style="margin-top: 10px;">
    <div class="us-step" style="border-left: 3px solid var(--warn);">Unacknowledged<br/><small class="warn">+ 4 hours</small></div>
    <div class="arrow">&rarr;</div>
    <div class="us-step" style="border-left: 3px solid var(--warn);">Auto escalation<br/><small>CRM ticket created</small></div>
    <div class="arrow">&rarr;</div>
    <div class="us-step" style="border-left: 3px solid var(--ok);">Bulk acknowledge<br/><small>(x3)</small></div>
    <div class="arrow">&rarr;</div>
    <div class="us-step" style="border-left: 3px solid var(--ok);">Logged in<br/><small>activity journal</small></div>
  </div>
  <div class="fragment" style="margin-top: 20px; font-size: 0.65em; color: #94a3b8;">
    <strong class="accent">Result:</strong> 3 anomalies detected in real time, automatically escalated, acknowledged in one click, traced in the audit trail.
  </div>
</section>

<!-- ============================================================ -->
<!-- SLIDE — US2: Partial delivery -->
<!-- ============================================================ -->
<section>
  <h2>User Story 2</h2>
  <h3>Managing a partial delivery</h3>
  <p style="font-size: 0.7em; color: #94a3b8; margin-bottom: 10px;">Scenario: Renaud family &mdash; bathroom, bathtub not delivered</p>
  <div class="us-flow">
    <div class="us-step" style="border-left: 3px solid var(--crit);">Driver blocked<br/><small>5th floor, no<br/>freight elevator</small></div>
    <div class="arrow">&rarr;</div>
    <div class="us-step" style="border-left: 3px solid var(--crit);">Partial delivery<br/><small class="crit">ANO-04</small></div>
    <div class="arrow">&rarr;</div>
    <div class="us-step" style="border-left: 3px solid var(--crit);">Installation scheduled<br/>without full delivery<br/><small class="crit">ANO-22</small></div>
    <div class="arrow">&rarr;</div>
    <div class="us-step" style="border-left: 3px solid var(--accent);">Operator alert<br/><small>+ 4h escalation</small></div>
  </div>
  <div class="fragment us-flow" style="margin-top: 10px;">
    <div class="us-step" style="border-left: 3px solid var(--ok);">Partial delivery<br/>approval<br/><small>customer consent</small></div>
    <div class="arrow">&rarr;</div>
    <div class="us-step" style="border-left: 3px solid var(--ok);">Rescheduling<br/>2nd attempt<br/><small>D+2</small></div>
    <div class="arrow">&rarr;</div>
    <div class="us-step" style="border-left: 3px solid var(--ok);">Installation<br/>kept at D+3<br/><small>technician confirmed</small></div>
  </div>
  <div class="fragment" style="margin-top: 20px; font-size: 0.65em; color: #94a3b8;">
    <strong class="accent">Result:</strong> PLO coordinates the re-delivery and maintains the installation thanks to real-time visibility on prerequisites.
  </div>
</section>

<!-- ============================================================ -->
<!-- SLIDE — US3: Customer portal -->
<!-- ============================================================ -->
<section>
  <h2>User Story 3</h2>
  <h3>Customer tracks their project</h3>
  <p style="font-size: 0.7em; color: #94a3b8; margin-bottom: 20px;">Public portal &mdash; <code>/api/public/tracking/:token</code></p>
  <div class="timeline">
    <div class="step">
      <div class="line" style="background: var(--ok);"></div>
      <div class="dot" style="background: var(--ok);"></div>
      <div>Order<br/>confirmed</div>
    </div>
    <div class="step">
      <div class="line" style="background: var(--ok);"></div>
      <div class="dot" style="background: var(--ok);"></div>
      <div>Preparation<br/>in progress</div>
    </div>
    <div class="step">
      <div class="line" style="background: var(--accent);"></div>
      <div class="dot" style="background: var(--accent);"></div>
      <div><strong>Consolidation</strong><br/>at station</div>
    </div>
    <div class="step">
      <div class="line" style="background: #475569;"></div>
      <div class="dot" style="background: #475569;"></div>
      <div>Delivery<br/>scheduled</div>
    </div>
    <div class="step">
      <div class="line" style="background: #475569;"></div>
      <div class="dot" style="background: #475569;"></div>
      <div>Delivered</div>
    </div>
    <div class="step">
      <div class="dot" style="background: #475569;"></div>
      <div>Installation<br/>complete</div>
    </div>
  </div>
  <div class="fragment two-col" style="margin-top: 30px; font-size: 0.85em;">
    <div class="box" style="border-left: 4px solid var(--ok);">
      <h3 class="ok">What the customer sees</h3>
      <ul style="font-size: 0.85em;">
        <li>Milestones with status and dates</li>
        <li>Carrier + tracking reference</li>
        <li>Estimated delivery slot</li>
        <li>Installation status</li>
      </ul>
    </div>
    <div class="box" style="border-left: 4px solid var(--crit);">
      <h3 class="crit">What stays hidden</h3>
      <ul style="font-size: 0.85em;">
        <li>Rule names / severities</li>
        <li>Internal IDs / ERP references</li>
        <li>Anomaly details</li>
        <li>Operator communications</li>
      </ul>
    </div>
  </div>
</section>

</div><!-- .slides -->
</div><!-- .reveal -->

<script src="https://unpkg.com/reveal.js@5.1.0/dist/reveal.js"></script>
<script>
  Reveal.initialize({
    hash: true,
    slideNumber: "c/t",
    transition: "slide",
    backgroundTransition: "fade",
    center: true,
    width: 1280,
    height: 720,
  });
</script>
</body>
</html>
